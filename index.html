<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    body {
      overflow: hidden;
      /* background-color: pink; */
    }

    canvas {
      background-color: pink;
    }
  </style>
</head>

<body>
  <canvas id='canvas' width="1500" height="1500"></canvas>

  <script src='index.js'></script>
  <script>
    //创建eCanvas对象
    let canvas = document.querySelector('#canvas')
    let eCanvas = new ECanvas(canvas)

    let rect = new ERect(10, 100, 100, 100)

    eCanvas.toBind(rect)

    rect.moveByKey(5)


    let arcs = []



    setInterval(() => {
      let arc = new EArc(rect.x + rect.width, rect.y + rect.height / 2, 10, 0, 2 * Math.PI, false, 'fill', 'red')
      // let arc = new ERect(e.clientX, e.clientY, 50, 50)
      arc.initMove({
        Vx: Math.random() * 10 + 5,
        Vy: Math.random() * 5 - Math.random() * 5
      })
      arc.move()
      eCanvas.toBind(arc)
      arcs.push(arc)
    }, 10)

    let ems = []
    setInterval(() => {
      let em = new ERect(1600, Math.random() * 1400, 100, 100, 'fill', '#000')
      em.initMove({
        Vx: -5
      })
      em.move()
      eCanvas.toBind(em)
      ems.push(em)
    }, 500)



    setInterval(() => {
      for (let i = 0; i < ems.length; i++) {
        for (let j = 0; j < arcs.length; j++) {
          if (arcs[j].x > 1300) {
            eCanvas.removeBind(arcs[j])
            arcs.splice(j, 1)
          }
          if (isHit(arcs[j], ems[i])) {
            eCanvas.removeBind(arcs[j])
            arcs.splice(j, 1)
            eCanvas.removeBind(ems[i])
            ems.splice(i, 1)
          }
        }
        if (ems[i].x < 0) {
          eCanvas.removeBind(ems[i])
          ems.splice(i, 1)
        }
      }

    }, 10)





    eCanvas.drow();
  </script>
</body>

</html>